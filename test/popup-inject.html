<!DOCTYPE html>
<html lang='zh-cmn-Hans'>
<head>
  <meta charset='UTF-8' />
  <title>popup-inject</title>
  <!-- 将滚动元素从 html 改为 body -->
  <style>
    html {
      overflow: hidden;
    }

    body {
      margin: 0;
      height: 100vh;
      overflow: auto;
    }
  </style>
</head>
<body></body>
<script src='../src/popup-inject.js'></script>
<script>
  const popupStyle = `
<style>
.popup {
  gap: 8px;
  min-width: 320px;
}
.example {
  display: none;
  height: 100vh;
  background: white;
  border: 1px solid #3d7fff;
  align-items: center;
  justify-content: center;
}
.example.show {
  display: flex;
}
</style>
`
  window.paso
    .injectPopup({
      namespace: 'test',
      actionName: 'Popup Inject Test',
      location: '30%',
      collapse: '80%',
      style: popupStyle,
      content: `<button class='button' type='button'>Show / Hide</button>
            <div class='example'>height: 100vh;</div>`,
      onPopShow() {
        console.log('popup show')
      },
      onPopHide() {
        console.log('popup hide')
      }
    })
    .then((result) => {
      const { popup } = result.elem
      const example = popup.querySelector('.example')

      popup.querySelector('.button').onclick = () => {
        example.classList.toggle('show')
      }
      const ce = result.func.createElement
      for (let i = 0; i < 50; i++) {
        document.body.append(ce('p', null, ce('button', null, ['button ' + i])))
      }
    })
</script>
</html>
